(function(){"use strict";var e={4347:function(e,o,n){n.d(o,{h:function(){return Ge}});var t=n(9242),r=n(3396);function a(e,o){const n=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(n)}var i=n(89);const s={},l=(0,i.Z)(s,[["render",a]]);var c=l,u=n(2483);function d(e,o,n,t,a,i){const s=(0,r.up)("HeaderBar"),l=(0,r.up)("PageFooter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s),(0,r.Wm)(l)],64)}const p={id:"headerbar"};function g(e,o,n,t,a,i){const s=(0,r.up)("HeaderLogo"),l=(0,r.up)("LinksBar");return(0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(s),(0,r.Wm)(l)])}n(560);function m(e,o,n,t,a,i){return(0,r.wg)(),(0,r.iD)("span",{id:"logo",onClick:o[0]||(o[0]=o=>e.$router.push("/"))},"Геннадий Ельцов")}var f={name:"HeaderLogo"};const v=(0,i.Z)(f,[["render",m]]);var h=v;const w={id:"linksbar"},b=(0,r._)("p",null,"Биография",-1),y=[b],_=(0,r._)("p",null,"Статьи",-1),k=[_],D=(0,r._)("p",null,"Галерея",-1),H=[D],F=(0,r._)("p",null,"Выйти",-1),L=[F];function I(e,o,n,t,a,i){return(0,r.wg)(),(0,r.iD)("div",w,[(0,r._)("div",{class:"link",onClick:o[0]||(o[0]=o=>e.$router.push("/bio"))},y),(0,r._)("div",{class:"link",onClick:o[1]||(o[1]=o=>e.$router.push("/publications"))},k),(0,r._)("div",{class:"link",onClick:o[2]||(o[2]=o=>e.$router.push("/gallery"))},H),i.isLogged?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"link",onClick:o[3]||(o[3]=(...e)=>i.logOut&&i.logOut(...e))},L)):(0,r.kq)("",!0)])}var O=n(4690),B={name:"LinksBar",data(){return{}},computed:{isLogged(){return this.$store.getters.isLogged}},methods:{logIn(){this.$router.push("/login")},async logOut(){const e=(0,O.v0)();console.log(e),await e.signOut(),this.$store.dispatch("logOut"),this.$router.push("/")}}};const W=(0,i.Z)(B,[["render",I]]);var P=W,$={name:"HeaderBar",components:{HeaderLogo:h,LinksBar:P}};const j=(0,i.Z)($,[["render",g],["__scopeId","data-v-0c327e11"]]);var C=j;const Z={id:"footer"},V=(0,r.Uk)(" 2023 Геннадий Ельцов");function M(e,o,n,t,a,i){return(0,r.wg)(),(0,r.iD)("div",Z,[(0,r._)("p",null,[(0,r._)("span",{onClick:o[0]||(o[0]=(...e)=>i.moveToLogin&&i.moveToLogin(...e))},"©"),V])])}var T={name:"PageFooter",components:{},methods:{moveToLogin(){this.$router.push("/login")}}};const Y=(0,i.Z)(T,[["render",M]]);var x=Y,q={name:"HomeView",components:{HeaderBar:C,PageFooter:x}};const G=(0,i.Z)(q,[["render",d]]);var K=G;function N(e,o,n,t,a,i){const s=(0,r.up)("HeaderBar"),l=(0,r.up)("LoginForm"),c=(0,r.up)("PageFooter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s),(0,r.Wm)(l),(0,r.Wm)(c)],64)}const U=e=>((0,r.dD)("data-v-e5cd652a"),e=e(),(0,r.Cn)(),e),E={class:"login-form"},S=U((()=>(0,r._)("h2",null,"Вход",-1))),z={class:"form-group"},A=U((()=>(0,r._)("label",{for:"email"},"Email:",-1))),J={class:"form-group"},R=U((()=>(0,r._)("label",{for:"password"},"Пароль:",-1))),Q=U((()=>(0,r._)("div",{class:"form-group"},[(0,r._)("button",{type:"submit"},"Войти")],-1)));function X(e,o,n,a,i,s){return(0,r.wg)(),(0,r.iD)("div",E,[(0,r._)("form",{onSubmit:o[2]||(o[2]=(0,t.iM)(((...e)=>s.login&&s.login(...e)),["prevent"]))},[S,(0,r._)("div",z,[A,(0,r.wy)((0,r._)("input",{type:"email",id:"email",name:"email",autocomplete:"email","onUpdate:modelValue":o[0]||(o[0]=e=>i.email=e),required:""},null,512),[[t.nr,i.email]])]),(0,r._)("div",J,[R,(0,r.wy)((0,r._)("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":o[1]||(o[1]=e=>i.password=e),required:""},null,512),[[t.nr,i.password]])]),Q],32)])}var ee={name:"LoginForm",data(){return{email:"",password:""}},methods:{login(){const e=(0,O.v0)();(0,O.e5)(e,this.email,this.password).then((e=>{this.$store.dispatch("logIn");const o=e.user;console.log(o),this.$router.replace("/")})).catch((e=>{const o=e.code;console.log(o);const n=e.message;console.log(n)}))}}};const oe=(0,i.Z)(ee,[["render",X],["__scopeId","data-v-e5cd652a"]]);var ne=oe,te={name:"LoginView",components:{HeaderBar:C,PageFooter:x,LoginForm:ne}};const re=(0,i.Z)(te,[["render",N]]);var ae=re;function ie(e,o,n,t,a,i){const s=(0,r.up)("HeaderBar"),l=(0,r.up)("Gallery"),c=(0,r.up)("PageFooter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s),(0,r.Wm)(l),(0,r.Wm)(c)],64)}var se=n(7139);const le=e=>((0,r.dD)("data-v-2af92880"),e=e(),(0,r.Cn)(),e),ce={key:0},ue={type:"file",ref:"file"},de={type:"text",ref:"caption",placeholder:"Описание"},pe=le((()=>(0,r._)("button",{type:"submit"},"Загрузить Фото!",-1))),ge={class:"gallery-container"},me={class:"thumbnail"},fe=["onClick"],ve=["src"],he={key:0,class:"modal"},we={class:"modal-content"},be=["src"];function ye(e,o,n,a,i,s){return(0,r.wg)(),(0,r.iD)(r.HY,null,[s.isLogged?((0,r.wg)(),(0,r.iD)("div",ce,[(0,r._)("form",{onSubmit:o[0]||(o[0]=(0,t.iM)(((...e)=>s.submitFile&&s.submitFile(...e)),["prevent"]))},[(0,r._)("input",ue,null,512),(0,r._)("input",de,null,512),pe],32)])):(0,r.kq)("",!0),(0,r._)("div",ge,[(0,r._)("div",me,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.images,((e,o)=>((0,r.wg)(),(0,r.iD)("div",{key:o,onClick:o=>s.openImage(e.path)},[(0,r._)("img",{src:e.path,alt:"Image",class:"thumbnail"},null,8,ve),(0,r._)("p",null,(0,se.zw)(e.caption),1)],8,fe)))),128))]),i.selectedImage?((0,r.wg)(),(0,r.iD)("div",he,[(0,r._)("div",we,[(0,r._)("span",{class:"close",onClick:o[1]||(o[1]=(...e)=>s.closeModal&&s.closeModal(...e))},"×"),(0,r._)("img",{src:i.selectedImage.path,alt:"Full-size Image"},null,8,be)])])):(0,r.kq)("",!0)])],64)}var _e=n(1294),ke=n(7130),De={name:"GalleryBody",data(){return{images:[],selectedImage:null}},computed:{isLogged(){return this.$store.getters.isLogged}},mounted(){this.readDataFromDb()},methods:{readDataFromDb(){const e=(0,ke.N8)(),o=(0,ke.iH)(e,"picData");(0,ke.jM)(o,(e=>{const o=e.val();if(o){const e=Object.values(o);this.images=e}}))},openImage(e){this.selectedImage={path:e}},closeModal(){this.selectedImage=null},async submitFile(){const e=this.$refs.file,o=this.$refs.caption.value,n=e.files[0];if(n){const e=(0,_e.cF)(),r=(0,_e.iH)(e,"gallery/"+n.name);try{const e=await(0,_e.KV)(r,n),t=await(0,_e.Jt)(e.ref);this.images.push({path:t,caption:o});const a=(0,ke.N8)(),i=(0,ke.iH)(a,"picData"),s=(0,ke.VF)(i);console.log(o),(0,ke.t8)(s,{path:t,caption:o}),console.log("File uploaded successfully!")}catch(t){console.error("Error uploading file:",t)}}}}};const He=(0,i.Z)(De,[["render",ye],["__scopeId","data-v-2af92880"]]);var Fe=He,Le={name:"GalleryView",components:{HeaderBar:C,PageFooter:x,Gallery:Fe}};const Ie=(0,i.Z)(Le,[["render",ie]]);var Oe=Ie;function Be(e,o,n,t,a,i){const s=(0,r.up)("HeaderBar"),l=(0,r.up)("PageFooter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s),(0,r.Wm)(l)],64)}var We={name:"PublicationsView",components:{HeaderBar:C,PageFooter:x}};const Pe=(0,i.Z)(We,[["render",Be]]);var $e=Pe;function je(e,o,n,t,a,i){const s=(0,r.up)("HeaderBar"),l=(0,r.up)("PageFooter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s),(0,r.Wm)(l)],64)}var Ce={name:"BioView",components:{HeaderBar:C,PageFooter:x}};const Ze=(0,i.Z)(Ce,[["render",je]]);var Ve=Ze;const Me=[{path:"/",name:"home",component:K},{path:"/login",name:"login",component:ae},{path:"/gallery",name:"gallery",component:Oe},{path:"/publications",name:"publications",component:$e},{path:"/bio",name:"bio",component:Ve}],Te=(0,u.p7)({history:(0,u.r5)(),routes:Me});Te.beforeEach((function(){console.log("page changed");const e=(0,O.v0)();(0,O.Aj)(e,(e=>{e?(console.log("IN"),console.log(e.email),Ge.dispatch("logIn")):(console.log("OUT"),Ge.dispatch("logOut"))}))}));var Ye=Te,xe=n(65),qe=n(7795);const Ge=(0,xe.MT)({state(){return{isLogged:!1}},mutations:{login(e){e.isLogged=!0},logout(e){e.isLogged=!1}},getters:{isLogged(e){return e.isLogged}},actions:{logIn(e){e.commit("login")},logOut(e){e.commit("logout")}}}),Ke={apiKey:"AIzaSyAjdnYQIhHawLRWsFjyfvb28Nv3r65DeJ0",authDomain:"gennady-website.firebaseapp.com",databaseURL:"https://gennady-website-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gennady-website",storageBucket:"gennady-website.appspot.com",messagingSenderId:"850191528241",appId:"1:850191528241:web:ede7443e5802f1432a8010",measurementId:"G-K0BNTHKX3D"};(0,qe.ZF)(Ke);const Ne=(0,t.ri)(c);Ne.use(Ye),Ne.use(Ge),Ne.mount("#app")}},o={};function n(t){var r=o[t];if(void 0!==r)return r.exports;var a=o[t]={exports:{}};return e[t].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(o,t,r,a){if(!t){var i=1/0;for(u=0;u<e.length;u++){t=e[u][0],r=e[u][1],a=e[u][2];for(var s=!0,l=0;l<t.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](t[l])}))?t.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var c=r();void 0!==c&&(o=c)}}return o}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,r,a]}}(),function(){n.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(o,{a:o}),o}}(),function(){n.d=function(e,o){for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={143:0};n.O.j=function(o){return 0===e[o]};var o=function(o,t){var r,a,i=t[0],s=t[1],l=t[2],c=0;if(i.some((function(o){return 0!==e[o]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)var u=l(n)}for(o&&o(t);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},t=self["webpackChunkportfolio"]=self["webpackChunkportfolio"]||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))}();var t=n.O(void 0,[998],(function(){return n(4347)}));t=n.O(t)})();
//# sourceMappingURL=app.7bf00890.js.map